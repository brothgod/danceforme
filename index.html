<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>dance 4 me !</title>
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.26/Tone.js"></script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="controls">
      <li id="top-left"><a id="openInfo">?</a></li>
      <div id="infoPopup" class="popup">
        <div class="popup-content">
          <pre>hi! 

            welcome to dance4me — an interactive audio manipulator that uses mediapipe pose landmark detection and tone.js audio effects to create a sound experience <span style="color: lightcoral;">that reacts to you as you react to it</span>
            
    1. click "enable webcam" to turn on the camera to begin using landmark motion detection

        2. use "sound settings" to change the number of people that show up in view and add/remove sound manipulation effects to the sample
      
      3. upload a .wav file in "manage samples" in order to use it for audio manipulation 

        4. press the toggle on the right to switch between stick figure mode and webcam mode 

      5. stand far enough from the webcam so that your whole body is in view
    
    6. dance 4 me ! ! !</pre>
    <br>
          <a id="closeInfo">– close —</a>
        </div>
      </div>
      <script>
      openInfo.addEventListener("click", function () {
        infoPopup.classList.add("show");
      });
      closeInfo.addEventListener("click", function () {
        infoPopup.classList.remove("show");
      });
      window.addEventListener("click", function (event) {
        if (event.target == infoPopup) {
          infoPopup.classList.remove("show");
        }
      });
      </script>
      <li id="top-right"><a id="webcamButton">&#8594 enable webcam</a></li>
      <li id="top-right"><a id="openSettings">&#8594 sound settings</a></li>
        <div id="settingsPopup" class="popup">
          <div class="popup-content">
            <pre>   : *   ･ﾟﾟ✼  :‧₊˚ ‧₊˚  ‧₊˚  ₊  *･ﾟﾟ</pre>
            <br>
            <p>sound manipulation effects</p>
            <div>
              <!-- change id and name to real mappings -->
              <input type="checkbox" id="scales" name="scales" unchecked />
              <label for="scales">reverberation</label>
              <br>

              <input type="checkbox" id="scales" name="scales" unchecked />
              <label for="scales">feedback delay</label>
              <br>

              <input type="checkbox" id="scales" name="scales" unchecked />
              <label for="scales">muffling</label>
              <br>

              <input type="checkbox" id="scales" name="scales" unchecked />
              <label for="scales">loop size</label>
            </div>
            <br>
            <br>
            <br>
            <p>number of people = <label><output id="value"></output></label></p>
            <div>
              <input id="numPeople" type="range" min="1" max="5" step="1" />
              <script>
              const value = document.querySelector("#value");
              const numPeople = document.querySelector("#numPeople");
              value.textContent = numPeople.value;
              numPeople.addEventListener("input", (event) => {
                value.textContent = event.target.value;
              });
              </script>
            </div>
            <br>
            <br>
            <a id="closeSettings">– close —</a>
          </div>
        </div>
      <script>
      openSettings.addEventListener("click", function () {
        settingsPopup.classList.add("show");
      });
      closeSettings.addEventListener("click", function () {
        settingsPopup.classList.remove("show");
      });
      window.addEventListener("click", function (event) {
        if (event.target == settingsPopup) {
          settingsPopup.classList.remove("show");
        }
      });
      </script>
      <li id="top-right"><input type="checkbox" /></li>
      <li id="bottom-right"><a id="openSamples">&#8594 manage samples</a></li>
      <div id="samplesPopup" class="popup">
        <div class="popup-content">
          <input type="file" id="audioFileInput" />
          <br>
          <br>
          <br>
          <a id="closeSamples">– close —</a>
        </div>
      </div>
      <script>
        openSamples.addEventListener("click", function () {
          samplesPopup.classList.add("show");
        });
        closeSamples.addEventListener("click", function () {
          samplesPopup.classList.remove("show");
        });
        window.addEventListener("click", function (event) {
          if (event.target == samplesPopup) {
            samplesPopup.classList.remove("show");
          }
        });
        </script>
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <label for="playbackRate">Playback Rate:</label>
      <input type="number" id="playbackRate" value="1" step="0.1" />
      <button id="playButton">Play</button>
      <button id="stopButton">Stop</button>
      <br />
      <label for="numPeople">Number of People:</label>
      <input type="number" id="numPeople" value="2" />
    </div>
    <!-- <div id="liveView" class="videoView">
      <div style="width: 100%; height: 100%; position: relative">
        <video
          id="webcam"
          style="width: 100%; height: 100%; position: absolute"
          autoplay
          playsinline
        ></video>
        <canvas
          class="output_canvas"
          id="output_canvas"
          width="1280px"
          height="720px"
          style="left: 0px; top: 0px; background: rgb(253, 18, 92)"
        ></canvas>
      </div> -->
    </div>
    <!-- uncomment this—this is all the webcam div stuff -->
    <script type="module" src="script.js"></script>
    <!-- <script type="module" src="audioScript.js"></script> -->
  </body>
</html>
